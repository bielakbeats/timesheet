<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0f172a" />
    <title>Time Sheet</title>
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" href="icons/icon-192.svg" />
    <link rel="apple-touch-icon" href="icons/icon-192.svg" />
  </head>
  <body>
    <main class="app">
      <header class="header">
        <div>
          <p class="eyebrow">Time Sheet</p>
          <h1>Punch in, punch out, export weekly hours</h1>
          <p class="sub">Add jobs, track sessions, and export per-job weekly totals.</p>
        </div>
        <div class="header-actions">
          <button id="installBtn" class="ghost" hidden>Install App</button>
        </div>
      </header>

      <section class="panel">
        <h2>Add Job</h2>
        <form id="jobForm" class="row">
          <input id="jobName" type="text" placeholder="Job name" required />
          <input id="jobRate" type="number" min="0" step="0.01" placeholder="Hourly rate ($)" />
          <button type="submit">Add</button>
        </form>
      </section>

      <section class="panel">
        <div class="row space-between">
          <h2>Jobs</h2>
          <div class="row">
            <label class="inline">
              Range
              <select id="rangeMode">
                <option value="week">Week</option>
                <option value="pay_period">Pay period</option>
              </select>
            </label>
            <label class="inline" id="weekStartWrap">
              Week starting
              <input id="weekStart" type="date" />
            </label>
            <label class="inline" id="payStartWrap" hidden>
              Pay period start
              <input id="payStart" type="date" />
            </label>
            <label class="inline" id="payLengthWrap" hidden>
              Length (days)
              <input id="payLength" type="number" min="1" step="1" />
            </label>
            <p id="payRangeLabel" class="sub" hidden></p>
          </div>
        </div>
        <div id="jobs" class="jobs"></div>
      </section>

      <section class="panel">
        <h2>Recent Sessions</h2>
        <div id="sessions" class="sessions"></div>
      </section>

      <section class="panel help">
        <h2>Add to iOS Home Screen</h2>
        <ol>
          <li>Open this page in Safari.</li>
          <li>Tap the Share icon.</li>
          <li>Select “Add to Home Screen”.</li>
          <li>Name it and tap Add.</li>
        </ol>
      </section>
    </main>

    <template id="jobTemplate">
      <article class="job">
        <div class="job-head">
          <div>
            <h3 class="job-name"></h3>
            <p class="job-meta"></p>
          </div>
          <div class="job-actions">
            <button class="punch"></button>
            <button class="ghost export">Export Week (CSV)</button>
            <button class="danger remove">Remove</button>
          </div>
        </div>
        <div class="job-body">
          <p class="job-week"></p>
          <div class="totals"></div>
        </div>
      </article>
    </template>

    <template id="sessionTemplate">
      <article class="session">
        <div>
          <p class="session-title"></p>
          <p class="session-time"></p>
        </div>
        <div class="session-actions">
          <p class="session-duration"></p>
          <button class="ghost small edit-session">Edit</button>
        </div>
      </article>
    </template>

    <dialog id="sessionDialog" class="dialog">
      <form id="sessionForm" method="dialog" class="dialog-body">
        <h3>Edit Session</h3>
        <label>
          Job
          <select id="sessionJob"></select>
        </label>
        <label>
          Start
          <input id="sessionStart" type="datetime-local" required />
        </label>
        <label>
          End
          <input id="sessionEnd" type="datetime-local" required />
        </label>
        <div class="dialog-actions">
          <button type="button" class="ghost" id="cancelSession">Cancel</button>
          <button type="submit">Save</button>
        </div>
      </form>
    </dialog>

    <div id="runningWidget" class="running-widget" hidden>
      <div class="running-inner">
        <div>
          <p class="running-title">On the clock</p>
          <p id="runningDetails" class="running-details"></p>
        </div>
        <button id="runningStop" class="danger">Punch Out</button>
      </div>
    </div>

    <script src="app.js" defer></script>
  </body>
</html>
